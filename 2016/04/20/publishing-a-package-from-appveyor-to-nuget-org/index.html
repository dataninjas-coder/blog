<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Publishing a package from AppVeyor to NuGet.org - Thomas Levesque&#39;s .NET Blog</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	
	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="shortcut icon" href="/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-31621259-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="Thomas Levesque&#39;s .NET Blog" rel="home">
				<div class="logo__title">Thomas Levesque&#39;s .NET Blog</div>
				
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Publishing a package from AppVeyor to NuGet.org</h1>
			
		</header><div class="content post__content clearfix">
			<p>In the last few months, I’ve been using <a href="https://ci.appveyor.com/">AppVeyor CI</a> on some of my open-source projects (along with <a href="http://cakebuild.net/">Cake</a> for the build scripts). I really like it, but one thing bothered me: I couldn’t find a way to manually publish packages to NuGet.org directly from AppVeyor. I had to download the package locally, then upload it manually from my machine (either with <code>nuget push</code> on the command line, or via the web form on NuGet.org), which is always error-prone.</p>
<p>The solution turned out to be pretty easy, once I knew where to look. I’ll describe the steps here.</p>
<h3 id="initial-configuration">Initial configuration</h3>
<p><strong>1. Configure NuGet.org as a deployment environment</strong></p>
<p>Before you can push packages to the NuGet gallery, you need to configure NuGet.org as a deployment environment (you only need to do this once, unless you want to publish under multiple identities).</p>
<p>Once logged in to AppVeyor, go to the <em>Environments</em> page, click <em>New Environment</em>, and select <em>NuGet</em> as the deployment provider:</p>
<p><img src="appveyor_new_environment-1.png" alt="appveyor_new_environment" title="appveyor_new_environment"></p>
<p>Choose a name for the environment (e.g. NuGet.org) and enter your API Key (no, it’s not my real key in the screenshot…). You can find your NuGet API key on your account page on NuGet.org when you’re logged in. Just leave the URL empty if you want to deploy to the official NuGet gallery. When you’re done, click <em>Add environment</em>.</p>
<p><strong>2. Configure artifacts in your project</strong></p>
<p>In your project settings, make sure the NuGet packages generated by your build process are configured as artifacts. You just need to add the path to the .nupkg files (the deployment name is optional):</p>
<p><img src="appveyor_configure_artifacts-1.png" alt="appveyor_configure_artifacts" title="appveyor_configure_artifacts"></p>
<p>That’s all! You’re now ready to publish.</p>
<h3 id="publishing-packages">Publishing packages</h3>
<p>Start a new build, and when it’s complete, click on the <em>Deploy</em> button for this build:</p>
<p><img src="appveyor_deploy_button-1.png" alt="appveyor_deploy_button" title="appveyor_deploy_button"></p>
<p>Select Nuget.org as the deployment environment:</p>
<p><img src="appveyor_deploy_to_nuget-1.png" alt="appveyor_deploy_to_nuget" title="appveyor_deploy_to_nuget"></p>
<p>Click <em>Deploy</em>, and wait for the magic to happen. If everything goes smoothly, you should see something like this:</p>
<p><img src="appveyor_deploy_result-1.png" alt="appveyor_deploy_result" title="appveyor_deploy_result"></p>
<p>Congratulations, your package is now on the NuGet gallery. Go there and check!</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/appveyor/" rel="tag">appveyor</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/continuous-integration/" rel="tag">continuous integration</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/deployment/" rel="tag">deployment</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/nuget/" rel="tag">nuget</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>





			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 Thomas Levesque&#39;s .NET Blog.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>