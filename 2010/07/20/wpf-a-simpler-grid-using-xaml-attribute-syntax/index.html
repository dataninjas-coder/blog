<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>[WPF] A simpler Grid using XAML attribute syntax | Thomas Levesque .NET Blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.69.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="[WPF] A simpler Grid using XAML attribute syntax" />
<meta property="og:description" content="The Grid control is one of the most frequently used containers in WPF. It allows to layout elements easily in rows and columns. Unfortunately the code to declare it, while simple to write, is made quite awkward by the use of the property element syntax:
&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&#34;Auto&#34;/&gt; &lt;RowDefinition Height=&#34;5&#34;/&gt; &lt;RowDefinition Height=&#34;*&#34;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&#34;60&#34; /&gt; &lt;ColumnDefinition Width=&#34;*&#34; /&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Label Content=&#34;Name&#34; Grid.Row=&#34;0&#34; Grid.Column=&#34;0&#34; /&gt; &lt;TextBox Text=&#34;Hello world&#34; Grid." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog2.thomaslevesque.net/2010/07/20/wpf-a-simpler-grid-using-xaml-attribute-syntax/" />
<meta property="article:published_time" content="2010-07-20T20:51:10+00:00" />
<meta property="article:modified_time" content="2010-07-20T20:51:10+00:00" />
<meta itemprop="name" content="[WPF] A simpler Grid using XAML attribute syntax">
<meta itemprop="description" content="The Grid control is one of the most frequently used containers in WPF. It allows to layout elements easily in rows and columns. Unfortunately the code to declare it, while simple to write, is made quite awkward by the use of the property element syntax:
&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&#34;Auto&#34;/&gt; &lt;RowDefinition Height=&#34;5&#34;/&gt; &lt;RowDefinition Height=&#34;*&#34;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&#34;60&#34; /&gt; &lt;ColumnDefinition Width=&#34;*&#34; /&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Label Content=&#34;Name&#34; Grid.Row=&#34;0&#34; Grid.Column=&#34;0&#34; /&gt; &lt;TextBox Text=&#34;Hello world&#34; Grid.">
<meta itemprop="datePublished" content="2010-07-20T20:51:10&#43;00:00" />
<meta itemprop="dateModified" content="2010-07-20T20:51:10&#43;00:00" />
<meta itemprop="wordCount" content="1128">



<meta itemprop="keywords" content="grid,WPF,XAML," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[WPF] A simpler Grid using XAML attribute syntax"/>
<meta name="twitter:description" content="The Grid control is one of the most frequently used containers in WPF. It allows to layout elements easily in rows and columns. Unfortunately the code to declare it, while simple to write, is made quite awkward by the use of the property element syntax:
&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&#34;Auto&#34;/&gt; &lt;RowDefinition Height=&#34;5&#34;/&gt; &lt;RowDefinition Height=&#34;*&#34;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&#34;60&#34; /&gt; &lt;ColumnDefinition Width=&#34;*&#34; /&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Label Content=&#34;Name&#34; Grid.Row=&#34;0&#34; Grid.Column=&#34;0&#34; /&gt; &lt;TextBox Text=&#34;Hello world&#34; Grid."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://blog2.thomaslevesque.net/" class="f3 fw2 hover-white no-underline white-90 dib">
      Thomas Levesque .NET Blog
    </a>
    <div class="flex-l items-center">
      

      
      














    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://blog2.thomaslevesque.net/2010/07/20/wpf-a-simpler-grid-using-xaml-attribute-syntax/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://blog2.thomaslevesque.net/2010/07/20/wpf-a-simpler-grid-using-xaml-attribute-syntax/&amp;text=[WPF]%20A%20simpler%20Grid%20using%20XAML%20attribute%20syntax" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog2.thomaslevesque.net/2010/07/20/wpf-a-simpler-grid-using-xaml-attribute-syntax/&amp;title=[WPF]%20A%20simpler%20Grid%20using%20XAML%20attribute%20syntax" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>

      <h1 class="f1 athelas mt3 mb1">[WPF] A simpler Grid using XAML attribute syntax</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2010-07-20T20:51:10Z">July 20, 2010</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>The <code>Grid</code> control is one of the most frequently used containers in WPF. It allows to layout elements easily in rows and columns. Unfortunately the code to declare it, while simple to write, is made quite awkward by the use of the property element syntax:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">
<span style="color:#f92672">&lt;Grid&gt;</span>
    <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;Auto&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;5&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;*&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
    <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
        <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;60&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;*&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
    
    <span style="color:#f92672">&lt;Label</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Name&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;Hello world&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;Rectangle</span> <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;Black&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.ColumnSpan=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;Label</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Image&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;Image</span> <span style="color:#a6e22e">Source=</span><span style="color:#e6db74">&#34;Resources/Desert.jpg&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/Grid&gt;</span>
</code></pre></div><p>In that example, more than half the code is made of the grid definition ! Even though this syntax offers a great flexibility and a precise control of the layout, in mot cases we just need to define the height of rows and the width of columns&hellip; so it would be much simpler if we could declare the grid using the attribute syntax, as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">
<span style="color:#f92672">&lt;Grid</span> <span style="color:#a6e22e">Rows=</span><span style="color:#e6db74">&#34;Auto,5,*&#34;</span> <span style="color:#a6e22e">Columns=</span><span style="color:#e6db74">&#34;60,*&#34;</span><span style="color:#f92672">&gt;</span>
    ...
<span style="color:#f92672">&lt;/Grid&gt;</span>
</code></pre></div><p>This article shows how to reach that goal, by creating a <code>SimpleGrid</code> class derived from <code>Grid</code>.  First of all, our class needs two new properties: <code>Rows</code> and <code>Columns</code>. These properties define the heights and widths of rows and columns, respectively. These dimensions are not just numbers: values such as <code>&quot;*&quot;</code>, <code>&quot;2*&quot;</code> ou <code>&quot;Auto&quot;</code> are valid dimensions for grid bands. WPF has a specific type to represent these values: the <code>GridLength</code> structure. So our new properties will be collections of <code>GridLength</code> objects. Here&rsquo;s the signature of the <code>SimpleGrid</code> class:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SimpleGrid</span> : Grid
{
    <span style="color:#66d9ef">public</span> IList&lt;GridLength&gt; Rows { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
    <span style="color:#66d9ef">public</span> IList&lt;GridLength&gt; Columns { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
}
</code></pre></div><p>Since these properties are in charge of defining the grid&rsquo;s rows and columns, they have to modify the <code>RowDefinitions</code> and <code>ColumnDefinitions</code> properties of the base class. Here&rsquo;s how to implement them to get the desired result :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">
        <span style="color:#66d9ef">private</span> IList&lt;GridLength&gt; _rows;
        <span style="color:#66d9ef">public</span> IList&lt;GridLength&gt; Rows
        {
            <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> _rows; }
            <span style="color:#66d9ef">set</span>
            {
                _rows = <span style="color:#66d9ef">value</span>;
                RowDefinitions.Clear();
                <span style="color:#66d9ef">if</span> (_rows == <span style="color:#66d9ef">null</span>)
                    <span style="color:#66d9ef">return</span>;
                <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> length <span style="color:#66d9ef">in</span> _rows)
                {
                    RowDefinitions.Add(<span style="color:#66d9ef">new</span> RowDefinition { Height = length });
                }
            }
        }

        <span style="color:#66d9ef">private</span> IList&lt;GridLength&gt; _columns;
        <span style="color:#66d9ef">public</span> IList&lt;GridLength&gt; Columns
        {
            <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> _columns; }
            <span style="color:#66d9ef">set</span>
            {
                _columns = <span style="color:#66d9ef">value</span>;
                ColumnDefinitions.Clear();
                <span style="color:#66d9ef">if</span> (_columns == <span style="color:#66d9ef">null</span>)
                    <span style="color:#66d9ef">return</span>;
                <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> length <span style="color:#66d9ef">in</span> _columns)
                {
                    ColumnDefinitions.Add(<span style="color:#66d9ef">new</span> ColumnDefinition { Width = length });
                }
            }
        }
</code></pre></div><p>At this point, our <code>SimpleGrid</code> is already usable&hellip; from C# code, which doesn&rsquo;t really help us since we&rsquo;re trying to make the <em>XAML</em> code simpler. So we need to find a way to declare the values of these properties in XAML attributes, which isn&rsquo;t obvious since they are collections&hellip;  In XAML, all attributes are written in the form of strings. To convert these strings to values of the required type, WPF makes use of converters, which are classes derived from <code>TypeConverter</code>, associated with each type which supports conversion to and from other types. For instance, the converter for the <code>GridLength</code> structure is the <code>GridLengthConverter</code> class, which can convert numbers and strings to <code>GridLength</code> objects, and back. The conversion mechanism is described in more detail in <a href="http://msdn.microsoft.com/en-us/library/aa970913.aspx">this MSDN article</a>.  So we need to create a converter and associate it to the type of the <code>Rows</code> and <code>Columns</code> properties. Since we don&rsquo;t have control over the <code>IList&lt;T&gt;</code> type, we&rsquo;ll start by creating a specific <code>GridLengthCollection</code> type to be used instead of <code>IList&lt;GridLength&gt;</code>, and we&rsquo;ll associate a custom converter with it (<code>GridLengthCollectionConverter</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#a6e22e">
</span><span style="color:#a6e22e">    [TypeConverter(typeof(GridLengthCollectionConverter))]</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GridLengthCollection</span> : ReadOnlyCollection&lt;GridLength&gt;
    {
        <span style="color:#66d9ef">public</span> GridLengthCollection(IList&lt;GridLength&gt; lengths)
            : <span style="color:#66d9ef">base</span>(lengths)
        {
        }
    }
</code></pre></div><p>Why is that collection read-only ? That just because allowing to add or remove rows and columns would make the implementation more complex, and it wouldn&rsquo;t bring any benefit for our objective, which is to make it easier to define a <code>Grid</code> in XAML. So, let&rsquo;s keep it simple, at least for now&hellip; The <code>ReadOnlyCollection&lt;T&gt;</code> does exactly what we need, so we just inherit from it, rather than reinventing the wheel.  Notice the use of the <code>TypeConverter</code> attribute: that&rsquo;s how we tell the framework which converter should be used with the <code>GridLengthCollection</code> type. Now, all we need to do is to implement that converter :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GridLengthCollectionConverter</span> : TypeConverter
    {
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">bool</span> CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
        {
            <span style="color:#66d9ef">if</span> (sourceType == <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">string</span>))
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">base</span>.CanConvertFrom(context, sourceType);
        }

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">bool</span> CanConvertTo(ITypeDescriptorContext context, Type destinationType)
        {
            <span style="color:#66d9ef">if</span> (destinationType == <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">string</span>))
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">base</span>.CanConvertTo(context, destinationType);
        }

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">object</span> ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, <span style="color:#66d9ef">object</span> <span style="color:#66d9ef">value</span>)
        {
            <span style="color:#66d9ef">string</span> s = <span style="color:#66d9ef">value</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
            <span style="color:#66d9ef">if</span> (s != <span style="color:#66d9ef">null</span>)
                <span style="color:#66d9ef">return</span> ParseString(s, culture);
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">base</span>.ConvertFrom(context, culture, <span style="color:#66d9ef">value</span>);
        }

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">object</span> ConvertTo(ITypeDescriptorContext context, CultureInfo culture, <span style="color:#66d9ef">object</span> <span style="color:#66d9ef">value</span>, Type destinationType)
        {
            <span style="color:#66d9ef">if</span> (destinationType == <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">string</span>) &amp;&amp; <span style="color:#66d9ef">value</span> <span style="color:#66d9ef">is</span> GridLengthCollection)
                <span style="color:#66d9ef">return</span> ToString((GridLengthCollection)<span style="color:#66d9ef">value</span>, culture);
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">base</span>.ConvertTo(context, culture, <span style="color:#66d9ef">value</span>, destinationType);
        }

        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> ToString(GridLengthCollection <span style="color:#66d9ef">value</span>, CultureInfo culture)
        {
            <span style="color:#66d9ef">var</span> converter = <span style="color:#66d9ef">new</span> GridLengthConverter();
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">string</span>.Join(<span style="color:#e6db74">&#34;,&#34;</span>, <span style="color:#66d9ef">value</span>.Select(v =&gt; converter.ConvertToString(v)));
        }

        <span style="color:#66d9ef">private</span> GridLengthCollection ParseString(<span style="color:#66d9ef">string</span> s, CultureInfo culture)
        {
            <span style="color:#66d9ef">var</span> converter = <span style="color:#66d9ef">new</span> GridLengthConverter();
            <span style="color:#66d9ef">var</span> lengths = s.Split(<span style="color:#e6db74">&#39;,&#39;</span>).Select(p =&gt; (GridLength)converter.ConvertFromString(p.Trim()));
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> GridLengthCollection(lengths.ToArray());
        }
    }
</code></pre></div><p>This class can converte a <code>GridLengthCollection</code> to and from a string, in which individual dimensions are separated by commas. Notice the use of the <code>GridLengthConverter</code>: since there already is a converter for the elements of the collections, we&rsquo;d better use it rather than try to reimplement the logic to parse a <code>GridLength</code>&hellip;  Now that all pieces are ready, we can try our new simple grid:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">
<span style="color:#f92672">&lt;my:SimpleGrid</span> <span style="color:#a6e22e">Rows=</span><span style="color:#e6db74">&#34;Auto,5,*&#34;</span> <span style="color:#a6e22e">Columns=</span><span style="color:#e6db74">&#34;60,*&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;Label</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Name&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;Hello world&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;Rectangle</span> <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;Black&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.ColumnSpan=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;Label</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Image&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;Image</span> <span style="color:#a6e22e">Source=</span><span style="color:#e6db74">&#34;Resources/Desert.jpg&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/my:SimpleGrid&gt;</span>
</code></pre></div><p>We end up with a much shorter and more readable code than with a normal <code>Grid</code>, and the result is the same: mission complete :)  Of course, we could improve this class in a number of ways: implement <code>Rows</code> and <code>Columns</code> as dependency properties in order to allow binding, handle addition and removal of rows and columns&hellip; However, this grid is intended for very simple scenarios, where the grid is defined once and for all, and is not modified at runtime (which is presumably the most frequent use case), so it seems sensible to keep it as simple as possible. For more specific needs, like specifying a minimum/maximum width or a shared sized group, we&rsquo;ll stick to the standard <code>Grid</code>.  For reference, here&rsquo;s the final code of the <code>SimpleGrid</code> class:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SimpleGrid</span> : Grid
    {
        <span style="color:#66d9ef">private</span> GridLengthCollection _rows;
        <span style="color:#66d9ef">public</span> GridLengthCollection Rows
        {
            <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> _rows; }
            <span style="color:#66d9ef">set</span>
            {
                _rows = <span style="color:#66d9ef">value</span>;
                RowDefinitions.Clear();
                <span style="color:#66d9ef">if</span> (_rows == <span style="color:#66d9ef">null</span>)
                    <span style="color:#66d9ef">return</span>;
                <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> length <span style="color:#66d9ef">in</span> _rows)
                {
                    RowDefinitions.Add(<span style="color:#66d9ef">new</span> RowDefinition { Height = length });
                }
            }
        }

        <span style="color:#66d9ef">private</span> GridLengthCollection _columns;
        <span style="color:#66d9ef">public</span> GridLengthCollection Columns
        {
            <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> _columns; }
            <span style="color:#66d9ef">set</span>
            {
                _columns = <span style="color:#66d9ef">value</span>;
                <span style="color:#66d9ef">if</span> (_columns == <span style="color:#66d9ef">null</span>)
                    <span style="color:#66d9ef">return</span>;
                ColumnDefinitions.Clear();
                <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> length <span style="color:#66d9ef">in</span> _columns)
                {
                    ColumnDefinitions.Add(<span style="color:#66d9ef">new</span> ColumnDefinition { Width = length });
                }
            }
        }
    }
</code></pre></div><ul class="pa0">
  
   <li class="list">
     <a href="/tags/grid" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">grid</a>
   </li>
  
   <li class="list">
     <a href="/tags/wpf" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">WPF</a>
   </li>
  
   <li class="list">
     <a href="/tags/xaml" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">XAML</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/2009/10/26/vs2010-binding-support-in-inputbindings/">[VS2010] Binding support in InputBindings</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/08/23/wpf-markup-extensions-and-templates/">[WPF] Markup extensions and templates</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/08/04/wpf-automatically-sort-a-gridview-continued/">[WPF] Automatically sort a GridView (continued)</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/07/28/wpf-a-markup-extension-that-can-update-its-target/">[WPF] A markup extension that can update its target</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/03/17/wpf-using-inputbindings-with-the-mvvm-pattern/">[WPF] Using InputBindings with the MVVM pattern</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/11/18/wpf-binding-to-application-settings-using-a-markup-extension/">[WPF] Binding to application settings using a markup extension</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/04/17/wpf-binding-to-an-asynchronous-collection/">[WPF] Binding to an asynchronous collection</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/03/27/wpf-automatically-sort-a-gridview-when-a-column-header-is-clicked/">[WPF] Automatically sort a GridView when a column header is clicked</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/02/25/wpf-article-about-model-view-viewmodel-design-pattern-by-josh-smith/">[WPF] Article about the Model-View-ViewModel design pattern, by Josh Smith</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/02/13/build-an-rss-reader-in-5-minutes/">Build an RSS reader in 5 minutes</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/02/05/wpf-paste-an-image-from-the-clipboard/">[WPF] Paste an image from the clipboard (bug in Clipboard.GetImage)</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://blog2.thomaslevesque.net/" >
    &copy;  Thomas Levesque .NET Blog 2020 
  </a>
    <div>













</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
